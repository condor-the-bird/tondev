<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>Reference Guide - TON DEV Knowledge-base</title>
        <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../../..">TON DEV Knowledge-base</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="../../..">Home</a>
                            </li>
                            <li >
                                <a href="../../../Glossary/">The Moonspeak</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Compilers <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../About/">Intro</a>
</li>
                                    
<li >
    <a href="../../Linker CLI/">Linker CLI</a>
</li>
                                    
<li >
    <a href="../../Specification of ABI/">Specification of ABI</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#">LLVM Compiler</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../LLVM Compiler/C Support Status/">Language Features</a>
</li>
            
<li >
    <a href="../../LLVM Compiler/C to TVM Library/">C to TVM Library</a>
</li>
            
<li >
    <a href="../../LLVM Compiler/Compiler Highlights/">Compiler Highlights</a>
</li>
            
<li >
    <a href="../../LLVM Compiler/Debugging Options/">Debugging Options</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Solidity Compiler</a>
    <ul class="dropdown-menu">
            
<li class="active">
    <a href="./">Reference Guide</a>
</li>
            
<li >
    <a href="../Solidity Support Status/">Solidity Support Status</a>
</li>
            
<li >
    <a href="../Usage/">Usage</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">FAQ <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../FAQ/SDK and Integration/">SDK and Integration</a>
</li>
                                    
<li >
    <a href="../../../FAQ/Smart Contracts/">Smart Contracts</a>
</li>
                                    
<li >
    <a href="../../../FAQ/Solidity Compiler/">Solidity Compiler</a>
</li>
                                    
<li >
    <a href="../../../FAQ/TON and TVM/">TON and TVM</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">SDK <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../SDK/Installation/">Installation</a>
</li>
                                    
<li >
    <a href="../../../SDK/Overview/">Overview</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Auxiliaries</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../SDK/Auxiliaries/Getting Logs/">Getting Logs</a>
</li>
            
<li >
    <a href="../../../SDK/Auxiliaries/Installing Ubuntu VM/">Installing Ubuntu VM</a>
</li>
            
<li >
    <a href="../../../SDK/Auxiliaries/TON SDK CLI/">TON SDK CLI</a>
</li>
            
<li >
    <a href="../../../SDK/Auxiliaries/Troubleshooting/">Troubleshooting</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Client Libraries</a>
    <ul class="dropdown-menu">
            
  <li class="dropdown-submenu">
    <a href="#">Library Modules</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../SDK/Client Libraries/Library Modules/Contracts/">Contracts</a>
</li>
            
<li >
    <a href="../../../SDK/Client Libraries/Library Modules/Crypto/">Crypto</a>
</li>
            
<li >
    <a href="../../../SDK/Client Libraries/Library Modules/Overview/">Overview</a>
</li>
            
<li >
    <a href="../../../SDK/Client Libraries/Library Modules/Queries/">Queries</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Using Libraries</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../SDK/Client Libraries/Using Libraries/Node.js/">Node.js</a>
</li>
            
<li >
    <a href="../../../SDK/Client Libraries/Using Libraries/Rust/">Rust</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Local node</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../SDK/Local node/Local Node/">Local Node</a>
</li>
            
<li >
    <a href="../../../SDK/Local node/Node SE Giver/">Node SE Giver</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">TON Labs Testnet</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../SDK/TON Labs Testnet/Testnet Giver/">Testnet Giver</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">TON Blockchain <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../TON Blockchain/Gal Calculation Basics/">Gas Calculation Basics</a>
</li>
                                    
<li >
    <a href="../../../TON Blockchain/Lite Client Guide/">Lite client</a>
</li>
                                    
<li >
    <a href="../../../TON Blockchain/Replay Attack Protection/">Replay Attack Protection</a>
</li>
                                    
<li >
    <a href="../../../TON Blockchain/Storage Fee Calculation/">Storage Fee Calculation</a>
</li>
                                    
<li >
    <a href="../../../TON Blockchain/TON Blockchain/">TON Blockchain</a>
</li>
                                    
<li >
    <a href="../../../TON Blockchain/TON Virtual Machine/">Introduction</a>
</li>
                                    
<li >
    <a href="../../../TON Blockchain/TON Whitepaper/">TON Whitepaper</a>
</li>
                                    
<li >
    <a href="../../../TON Blockchain/TVM Error Codes/">TVM Error Codes</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="../../LLVM Compiler/Debugging Options/">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="../Solidity Support Status/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#decrements">Decrements</a></li>
        <li class="main "><a href="#string-literals">String Literals</a></li>
        <li class="main "><a href="#unfixed-decimals">Unfixed Decimals</a></li>
        <li class="main "><a href="#conditional-loops">Conditional Loops</a></li>
        <li class="main "><a href="#comma-operator">Comma Operator</a></li>
        <li class="main "><a href="#function-modifiers">Function Modifiers</a></li>
            <li><a href="#example">Example</a></li>
        <li class="main "><a href="#assembly">Assembly</a></li>
            <li><a href="#sample-1">Sample 1</a></li>
            <li><a href="#sample-2">Sample 2</a></li>
        <li class="main "><a href="#call-functions">Call Functions</a></li>
        <li class="main "><a href="#return-and-callback">Return and Callback</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h2 id="decrements">Decrements</h2>
<p>The current compiler version does not support Solidity decrements operation.</p>
<p>Don't use expressions like:</p>
<pre><code class="javascript">b--;
</code></pre>

<p>Use instead:</p>
<pre><code class="javascript">b - 1;
</code></pre>

<h2 id="string-literals">String Literals</h2>
<p>The current compiler version does not support Solidity string literal. Avoid expressions like:</p>
<pre><code class="javascript">bytes32 b = &quot;foo&quot;;   
</code></pre>

<p>And:</p>
<pre><code class="javascript">string memory b = &quot;foo&quot;;  
</code></pre>

<h2 id="unfixed-decimals">Unfixed Decimals</h2>
<p>Unfixed decimals are not currently supported by the compiler, avoid expressions like:</p>
<pre><code class="javascript">ufixed b = a * 2.5;
</code></pre>

<h2 id="conditional-loops">Conditional Loops</h2>
<p>The compiler supports <em>for</em> and <em>while</em> conditional loops, but does not support <em>do .. while..</em> expressions.</p>
<p>Don't use:</p>
<pre><code class="javascript">do {
        i++;
 } 
while (i &lt; x);
</code></pre>

<p>Use instead:</p>
<pre><code class="javascript">i++;
while (i &lt; x) {
     i++;
}
</code></pre>

<h2 id="comma-operator">Comma Operator</h2>
<p>The comma operator is not yet supported by the compiler, use the suggested workaround.</p>
<p>Don't use expressions like:</p>
<pre><code class="javascript">a = (b++, c++);
</code></pre>

<p>Use instead:</p>
<pre><code class="js">b++;
a = c++;                  
</code></pre>

<p>All in all, this operator is not used often, but you may need for an expression like:</p>
<pre><code class="javascript">void rev(char *s, size_t len) 
{ 
            char *first; 
            for (first = s, s += len; s &gt;= first; --s) { 
                    putchar(*s); 
            } 
}
</code></pre>

<h2 id="function-modifiers">Function Modifiers</h2>
<p>Currently, modifiers are not supported by the sol2tmv compiler, though it is a planned feature and we have a workaround.</p>
<p>Modifiers must be called directly as functions. The modifier should be defined as a pure or view internal function and should compile correctly.</p>
<h3 id="example">Example</h3>
<pre><code class="javascript">//original solidity
contract Test {
    address owner;

    modifier onlyOwner() {
        require(msg.sender == owner);
        _;
    }

    function doSmthg() public onlyOwner {

    }
}

//sol2tvm
contract Test {
    address owner;

    function onlyOwner() view internal {
        require(msg.sender == owner);
    }

    function doSmthg() public {
        onlyOwner();
    }
}
</code></pre>

<h2 id="assembly">Assembly</h2>
<p>Inline, Solidity and Standalone assembly implementations are not used outside the Ethereum VM. TON Labs sol2tvm compiler uses its own equivalent of <a href="https://solidity.readthedocs.io/en/v0.4.24/assembly.html">inline Assembly</a>, other versions are not supported and cannot be compiled.</p>
<p>Assembly is used sparingly in smart contracts and there is no hard and fast way to provide a workaround. If you have to migrate a smart contract containing assembly code, remove it or rewrite it in Solidity. </p>
<p>Below we have some standard conversion samples taken from public sources.</p>
<h3 id="sample-1">Sample 1</h3>
<p><strong>Assembly</strong></p>
<pre><code class="assembly">mul(1, add(2, 3)) 
</code></pre>

<p><strong>Solidity</strong></p>
<pre><code class="javascript">uint a = (2+3) * 1;                      
</code></pre>

<h3 id="sample-2">Sample 2</h3>
<p><strong>Assembly</strong></p>
<pre><code class="assembly">function add(uint a, uint b){ assembly { let sum := add(a, b) mstore(mload(0x40), sum) }}
</code></pre>

<p>â€‹                       </p>
<p><strong>Solidity</strong></p>
<pre><code class="javascript">function add(uint a, uint b) { uint sum = a + b;}
</code></pre>

<h2 id="call-functions">Call Functions</h2>
<p>These functions are best described in Solidity documentation here: <a href="https://solidity.readthedocs.io/en/v0.5.11/types.html#address">https://solidity.readthedocs.io/en/v0.5.11/types.html#address</a> </p>
<p><strong>Call, delegatecall and staticcall</strong> are used to interface with contracts that do not follow the ABI, or to get more direct control over the encoding. </p>
<p>We are focused on providing the highest level of security in our products.  So, we feel that interacting with contracts that do not have an ABI public description is not in line with what we want to achieve. Therefore, we do not support or have any plans to support these features or to create an analogue. Workarounds have not been specified yet.</p>
<h2 id="return-and-callback">Return and Callback</h2>
<p><strong>Return</strong> works as expected only for internal contract calls according to TON architecture. It is not possible to use <strong>return</strong> to receive a message back from external contract.</p>
<p>By design, in TON you need to use <strong>callback</strong> as a separate function in the second contract that sends a message back.</p>
<p>If contract A calls contract B and requires a return of value, a <strong>callback</strong> should be specified in contract A to receive the answer.</p>
<p>Example:</p>
<pre><code class="javascript">contract A { 
 function a() { 
   B.b(); //make request
 } 
 function c() { 
 //this is callback
  }
}
contract B { 
 function b() { 
     A.c() //send answer }
}
</code></pre></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../..",
                shortcuts = {"search": 83, "next": 78, "help": 191, "previous": 80};
        </script>
        <script src="../../../js/base.js" defer></script>
        <script src="../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
